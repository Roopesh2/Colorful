(function(H){function y(h,u){function f(g,p){c.push({a:g,b:p.r(),c:l.length})}function D(g,p){p=void 0===p?0:p;for(var z=0,v=0;v<g.length;v++){var t=g[v],E=void 0;"A"!=t.a&&"G"!=t.a||t.c!=p||"K"==(null==(E=g[v-1])?void 0:E.a)||(z++,t.a="F",w.push(t.b.trim()))}c=c.concat(g);z&&q.push(z+(q[q.length-1]||0)+1);r="function"}function I(g){var p=m.b||"";J.test(g)||("get"==g||"set"==g)&&"class"==l[l.length-1]?(f("C",g),/(function|if|do|while|for|class|catch|else|finally|switch|try)/.test(g)&&(r=g)):K.test(g)&&
!/^(function|var|const|let|interface)/.test(p)&&!/(\.\s*)$/.test(p)||"constructor"==g&&"class"==l[l.length-1]?f("G",g):/(\.\s*)$/.test(p)?f("B",g):-1<w.indexOf(g)||"arguments"==g?f("F",g):f("A",g)}u=void 0===u?{}:u;for(var A=h.length,c=[],a="",l=[],w=[],q=[],r="",b=0;b<A;){if(a=h.substring(b).match(L)){var d=a[0];a=d.match(B);var m=c[c.length-1]||C;a?(d=h.substring(b).match(B)[0],f("E",d)):I(d);b+=d.length;window.Colorful.m(c)}else"."==h[b]&&/\d/.test(h[b+1])&&(a=h.substring(b).match(B)[0],f("E",
a),b+=a.length);if(b==A)break;m=c[c.length-1]||C;var e=h[b],k=h.substr(b,2);if(F.test(e))a=h.substring(b).match(F)[0],m.b?m.b+=a:f("A",a),b+=a.length;else if("'"==e||'"'==e||"`"==e)for(f("I",e),b++,a="",d=0,k="'"==e?/^[^'\\]+/:'"'==e?/^[^"\\]+/:/^[^`\\${]+/;b<A;){if(a=h.substring(b).match(k))f("I",a[0]),b+=a[0].length,d=0;a=h[b];if("\\"==a)a=h.substring(b).match(/[\\]+/)[0],f("I",a),d+=a.length,b+=a.length;else if(a==e){if(f("I",a),b++,0==d%2)break}else if("${"==h.substr(b,2)){f("K","${");b+=2;a=
h.substring(b);var n=y(a,{breakOnBraceUnmatch:!0});n.tokens.length&&(c=c.concat(n.tokens));b+=n.inputEnd;n.inputEnd!=a.length?(f("K","}"),b++):"\n"==h[b-1]&&(c[c.length-1].b+="\n")}}else if(M.test(e))if(a=h.substring(b),d=m.a,"//"==k||"/*"==k)a=a.match(N)[0],b+=a.length,f("D",a);else if("/"==e&&("A"!=d||/^\s+$/.test(m.b))&&"B"!=d&&"E"!=d&&G.test(a))k=!0,n=void 0,d=null==(n=c[c.length-2])?void 0:n.a,"D"!=m.a||"A"!=d&&"B"!=d&&"E"!=d||(k=!1),k?(k=a.match(G)[0],f("J",k),b+=k.length):(f("K",e),b++);else if("=>"==
k){if("A"==m.a)m.a="F",w.push(m.b.trim()),q.push((q[q.length-1]||0)+1),r="function";else if(/\)\s*$/.test(m.b)){a=l.length;n=[c[c.length-1]];for(var x=c.length-2;0<=x;x--)if(d=c[x],n.push(d),"L"==d.a&&d.c==a){c.splice(x);break}n.reverse();D(n,a+1)}f("K",k);b+=2}else f("K",e),b++;else if("("==e){a=m;d=a.a;k=c[c.length-2]||C;k=a.b.match(/function\s*$/)&&"C"==d||k.b.match(/function\s*$/)&&"C"==k.a||"class"==l[l.length-1];f("L","(");b++;l.push("(");r="(";if("A"==d||"B"==d)a.a="H";k&&(a=y(h.substring(b),
{breakOnParenUnmatch:!0}),D(a.tokens),b+=a.inputEnd)}else if("{"==e||"["==e)f("L",e),b++,l.push(r),r=e;else{if("}"==e||")"==e||"]"==e)if(a={"}":"breakOnBraceUnmatch",")":"breakOnParenUnmatch","]":"breakOnBracketUnmatch"},0<l.length)"}"==e&&q.length&&"function"==l[l.length-1]&&(w.splice(q[q.length-2]),q.pop()),l.pop();else if(u[a[e]])break;f("L",e);b++}window.Colorful.m(c)}"\n"==e&&(c[c.length-1].b+="\n");return{tokens:c,inputEnd:b}}var J=/^(async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|export|extends|false|finally|for|function|if|implements|import|in|instanceof|interface|let|new|null|package|return|static|super|switch|this|throw|true|try|typeof|undefined|var|void|while|with|yield)$/,
M=/[-=+*/%!<>&|:?]/,L=/^[\w\u00c0-\uffff$]+/u,B=/^(\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?)/,N=/((\/\*[\s\S]*?\*\/|\/\*[\s\S]*)|(\/\/.*))/,G=/^\/((?![*+?])(?:[^\r\n\[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*\])+)\/[gimyus]*/,K=/^(AggregateError|Buffer|Array|ArrayBuffer|AsyncFunction|AsyncGenerator|AsyncGeneratorFunction|Atomics|BigInt|BigInt64Array|BigUint64Array|Boolean|DataView|Date|Error|EvalError|Float32Array|Float64Array|Function|Generator|GeneratorFunction|Int16Array|Int32Array|Int8Array|InternalError|Intl|JSON|Map|Math|Number|Object|Promise|Proxy|RangeError|ReferenceError|Reflect|RegExp|Set|SharedArrayBuffer|String|Symbol|SyntaxError|TypeError|URIError|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|WeakMap|WeakSet|WebAssembly)$/,
F=/[\s]+/,C={a:"",b:""};H.Colorful.tokenizers.JS=y})(window);